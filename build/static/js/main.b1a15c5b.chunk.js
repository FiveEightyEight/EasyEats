(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{212:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(90),s=a.n(o),r=a(12),c=a(13),i=a(15),m=a(14),u=a(16),d=a(23),p=a(22),g=(a(68),function(e){var t=e.categories,a=e.image_url,n=e.menu_url,o=e.name,s=e.price,r=e.poll,c=e.isDisabled,i=e.handleOnClick,m=e.isChecked;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row container mx-0"},l.a.createElement("div",{className:"col-sm-12 col-md-2 restList_img"},l.a.createElement("img",{className:"card-img",style:{height:"100px",width:"100%",objectFit:"cover"},src:a,alt:o})),l.a.createElement("div",{className:"card-header col restList_box"},l.a.createElement("li",{className:"list-group-item"},l.a.createElement("div",{className:"row justify-content-between"},l.a.createElement("span",{className:"col h4"},o),l.a.createElement("a",{href:n,target:"_blank",className:"col-sm-2 button-red",rel:"noopener noreferrer"},"Menu"))),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col col-xs-10"},l.a.createElement("span",{className:"col h6",style:{paddingLeft:"2px",paddingRight:"2px"}}," ",t.join(", ")," ")),s?l.a.createElement("span",{className:"col-sm-1"},s):l.a.createElement("span",{className:"col-sm-1"},"--"),r?l.a.createElement("div",{className:" col-sm-1 form-check form-check-inline"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"inlineCheckbox1",onClick:i("voted_on"),value:o,disabled:c,checked:m}),l.a.createElement("label",{className:"form-check-label h6",htmlFor:"inlineCheckbox1"},"Vote")):l.a.createElement(l.a.Fragment,null))))))}),h=function(e){var t=e.specHandleOnClick,a=e.handleOnChange,n=e.handleOnPollSubmit,o=e.votes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{type:"button",className:"btn btn-outline-info","data-toggle":"modal","data-target":"#exampleModalCenter",style:{width:"100%"},onClick:t},"Create Poll"),l.a.createElement("div",{className:"modal fade",id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"exampleModalCenterTitle"},"Votes Required"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("input",{className:"form-control",type:"text",placeholder:"2 votes or more",value:o,onChange:a("votes")})),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),l.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:n("modal")},"Go Vote"))))))},f=a(27),v=a.n(f),E=function(e){var t=e.businesses;return new Promise(function(e,a){if(!Array.isArray(t)||!t.length)return a("Invalid data passed, Must be a yelp data response");var n={};return e(t.reduce(function(e,t,a){var l=t.name,o=t.alias,s=t.display_phone,r=t.image_url,c=t.price,i=t.phone;if(!n[l]){var m=t.categories.reduce(function(e,t){return e.push(t.title),e},[]);e.push({name:l,display_phone:s||null,phone:i||null,menu_url:"https://www.yelp.com/menu/"+o,image_url:r||null,price:c||null,categories:m}),n[l]=!0}return e},[]))})},y=function(e,t){return function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.length===t)return n;var l=Math.floor(Math.random()*a);return n.includes(l)?e(t,a,n):(n.push(l),e(t,a,n))}(e,t.length).reduce(function(e,a){return e.push(t[a]),e},[])},b=a(91),N=a.n(b),O=a(64),k=a.n(O);a(200);k.a.initializeApp({apiKey:"AIzaSyB6IU_v1uW_H1xso-2pP5EfcW1MCwQhOfA",authDomain:"easyeats-a662b.firebaseapp.com",databaseURL:"https://easyeats-a662b.firebaseio.com",projectId:"easyeats-a662b",storageBucket:"easyeats-a662b.appspot.com",messagingSenderId:"38887412175"});var C=k.a,S=a(26),_=a.n(S),w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleOnClick=function(e){return function(t){switch(e){case"regen":a.generateRandomRestaurantList();break;case"create":a.generatePoll();break;case"modal":var n=a.state.votes.trim();if(!n.match(/[0-9]/g))return void a.setState({votes:""});var l=n.match(/[0-9]/g)[0];if(parseInt(l)<2)return void a.setState({votes:""});a.generatePoll(l);break;default:return}}},a.specHandleOnClick=function(e){},a.handleOnChange=function(e){return function(t){switch(e){case"votes":a.setState(Object(p.a)({},e,t.target.value));break;default:return}}},a.getOptions=function(){v()({method:"GET",url:"https://cors-anywhere.herokuapp.com/".concat("https://api.yelp.com/v3/businesses/search?term=fastfood&latitude=",a.state.lat,"&longitude=").concat(a.state.lon,"&limit=50"),headers:{Authorization:"BEARER 7qhXzmc-qBs_nON-yV8qSFRDQOJkB9e5UYMVuyik8ySqoilGOlVAvGE7F31YxftS2nEMUkugJUlS7PyM-D0nnUuaxq3BOKUVH0aHZipZHx48RP-X31AVCYz1bX7EXHYx"}}).then(function(e){return E(e.data)}).then(function(e){console.log(e),a.setState({restaurants:e},function(){localStorage.setItem("ee_restList",JSON.stringify(e)),a.generateRandomRestaurantList()})})},a.getOptions2=function(e){v()({method:"GET",url:"https://cors-anywhere.herokuapp.com/".concat("https://api.yelp.com/v3/businesses/search?term=fastfood&location=",e,"&limit=50"),headers:{Authorization:"BEARER 7qhXzmc-qBs_nON-yV8qSFRDQOJkB9e5UYMVuyik8ySqoilGOlVAvGE7F31YxftS2nEMUkugJUlS7PyM-D0nnUuaxq3BOKUVH0aHZipZHx48RP-X31AVCYz1bX7EXHYx"}}).then(function(e){return E(e.data)}).then(function(e){return a.setState({restaurants:e},function(){localStorage.setItem("ee_restList",JSON.stringify(e)),a.generateRandomRestaurantList()})})},a.generateRandomRestaurantList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||a.state.restaurants;if(t){var n=y(4,t);e?a.setState({restaurants:e,display:n},function(){localStorage.setItem("ee_restDisplayList",JSON.stringify(n))}):a.setState({display:n},function(){localStorage.setItem("ee_restDisplayList",JSON.stringify(n))})}else a.setState({redirect:!0})},a.generatePoll=function(){var e=a.state,t=e.display,n=e.votes,l=t.reduce(function(e,a,n){var l=Math.floor(Math.random()*t[n].name.length);return e+=t[n].name[1]+t[n].name[0]+t[n].name[l]},"").replace(/[^a-zA-Z0-9]/g,"ee");C.database().ref("/polls").child(l).set({data:t,req_votes:n,total_votes:[0,0,0,0]},function(e){e?console.log("FAILED TO WRITE TO FIREBASE"):a.props.history.push("/poll/".concat(l))})},a.checkData=function(e){C.database().ref("/polls/"+e).once("value").then(function(e){console.log("snapshot: ",e.val())}).catch(function(e){console.log(e)})},a.pageLoad=function(){var e=N.a.parse(a.props.location.search);if(e.lat&&e.lon){if(!e.lat||!e.lon)return void a.setState({redirect:!0});var t=localStorage.getItem("ee_latlon")?JSON.parse(localStorage.getItem("ee_latlon")):null;if(t&&e.lat===t.lat&&e.lon===t.lon)return a.pageReloaded();var n={lat:e.lat,lon:e.lon};localStorage.setItem("ee_latlon",JSON.stringify(n)),a.setState({lat:e.lat,lon:e.lon},function(){a.getOptions()})}else{var l=a.props.location.search.split("=")[1],o=localStorage.getItem("ee_loc")?JSON.parse(localStorage.getItem("ee_loc")):null;if(o&&o===l)return a.pageReloaded();var s={loc:l};localStorage.setItem("ee_loc",JSON.stringify(s)),a.getOptions2(l)}},a.pageReloaded=function(){var e=localStorage.getItem("ee_restList")?JSON.parse(localStorage.getItem("ee_restList")):null;if(!e)return localStorage.setItem("ee_loc",JSON.stringify(null)),localStorage.setItem("ee_latlon",JSON.stringify(null)),void a.pageLoad();var t=localStorage.getItem("ee_restDisplayList")?JSON.parse(localStorage.getItem("ee_restDisplayList")):null;t?a.setState({restaurants:e,display:t}):a.generateRandomRestaurantList(e)},a.state={lat:null,lon:null,restaurants:null,display:null,redirect:!1,votes:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.pageLoad()}},{key:"render",value:function(){var e=this.state,t=e.display,a=e.votes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"image center"},l.a.createElement("img",{src:_.a,alt:"logo"})),t?l.a.createElement("div",{className:"container"},t.map(function(e,t){return l.a.createElement("div",{className:"my-1",key:t},l.a.createElement(g,e))}),l.a.createElement("div",{className:"container row my-1"},l.a.createElement("div",{className:"col-sm-12 my-1"},l.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:this.handleOnClick("regen"),style:{width:"100%"}},"New Restaurants")),l.a.createElement("div",{className:"col-sm-12 my-1"},l.a.createElement(h,{specHandleOnClick:this.specHandleOnClick,handleOnChange:this.handleOnChange,inputValue:a,handleOnPollSubmit:this.handleOnClick})))):l.a.createElement("div",{className:"d-flex justify-content-center mt-5 pt-5"},l.a.createElement("div",{className:"spinner-border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading..."))))}}]),t}(n.Component),x=Object(d.f)(function(e){var t=e.goTo,a=e.value,n=e.handleOnClick;return l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(l){"My Location"===a&&n(),e.history.push(t)}},a)}),j=a(48),I=a.n(j),M=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={loading:null},a.geo=function(){a.setState({loading:!0},function(){setTimeout(function(){a.setState({loading:!1})},1500)}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var t=e.coords,n=t.latitude,l=t.longitude;console.log("latitude:"+n,"Longitude:"+l),a.props.history.push("/genpoll?lat=".concat(n,"&lon=").concat(l))})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{images:{0:"https://image.flaticon.com/icons/svg/706/706195.svg",1:"https://image.flaticon.com/icons/svg/1676/1676981.svg",2:"https://image.flaticon.com/icons/svg/1591/1591724.svg",3:"https://image.flaticon.com/icons/svg/273/273804.svg",4:"https://image.flaticon.com/icons/svg/1672/1672272.svg"},how:130,time:25,size:"90px",background:"teal"}),l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"row justify-content-md-center"},l.a.createElement("div",{className:"col-md-12 row justify-content-md-center"},l.a.createElement("img",{className:"col col-md-auto",src:_.a})),l.a.createElement("div",{className:"col-md-12 row justify-content-md-center m-2"},l.a.createElement("span",{style:{marginRight:"1%"}},l.a.createElement(x,{className:"col col-md-6",goTo:"/",value:"My Location",handleOnClick:function(t){e.geo()}})),l.a.createElement(x,{className:"col col-md-6",goTo:"/infopage",value:"Enter Location"})),this.state?l.a.createElement(l.a.Fragment,null):l.a.createElement("div",{className:"d-flex justify-content-center mt-5 pt-5"},l.a.createElement("div",{className:"spinner-border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading..."))))))}}]),t}(n.Component),R=(a(212),function(e){var t=e.handleInputChange,a=e.handleOnClick,n=e.states;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"mt-5 pt-5"},l.a.createElement("form",null,l.a.createElement("div",{className:"image"},l.a.createElement("img",{src:_.a,alt:"logo"})),l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col ml-4 col-sm-8 col-md-5",style:{background:"red"}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{for:"inputAddress"},"Address"),l.a.createElement("input",{type:"text",onChange:function(e){return t(e)},name:"address",className:"form-control",id:"validationCustom01",placeholder:"1234 Main St"})),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",{for:"inputCity"},"City"),l.a.createElement("input",{type:"text",onChange:function(e){return t(e)},name:"city",className:"form-control",id:"inputCity"})),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",{for:"inputState"},"State"),l.a.createElement("select",{id:"inputState",onChange:function(e){return t(e)},name:"state",class:"form-control"},l.a.createElement("option",{selected:!0},"Choose..."),n.map(function(e,t){return l.a.createElement("option",{key:t,value:e},e)}))),l.a.createElement("div",{className:"form-group col-md-2"},l.a.createElement("label",{for:"inputZip"},"Zip"),l.a.createElement("input",{type:"text",onChange:function(e){return t(e)},name:"zip",className:"form-control",id:"inputZip"}))),l.a.createElement("button",{type:"submit",className:"btn btn-info",onClick:a},"Enter"))))))}),L=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){console.log(e.target.value)},a.handleOnClick=function(){var e=a.state,t=e.address,n=e.city,l=e.zip,o=e.state;a.props.history.push("/genpoll?address=".concat(t,",").concat(n,",").concat(o," ").concat(l))},a.handleInputChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.state={states:["Alabama","Alaska","American Samoa","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","District of Columbia","Federated States of Micronesia","Florida","Georgia","Guam","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Marshall Islands","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Northern Mariana Islands","Ohio","Oklahoma","Oregon","Palau","Pennsylvania","Puerto Rico","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virgin Island","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],address:null,city:null,state:null,zip:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.states;return l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{images:{0:"https://image.flaticon.com/icons/svg/1076/1076323.svg",1:"https://image.flaticon.com/icons/svg/1585/1585289.svg",2:"https://image.flaticon.com/icons/svg/1594/1594208.svg"},how:130,time:25,size:"90px",background:"white"}),l.a.createElement(R,{handleInputChange:this.handleInputChange,handleOnClick:this.handleOnClick,states:e}))}}]),t}(l.a.Component),A=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={id:null,redirect:!1,restaurants:null,req_votes:null,total_votes:null,voted_on:null,voted_value:null,disabled:null,copySuccess:""},a.checkData=function(e){C.database().ref("/polls/"+e).once("value").then(function(e){return e.val()}).then(function(t){if(t){var n=localStorage.getItem("ee_"+e)?JSON.parse(localStorage.getItem("ee_"+e)):null;if(n)return void a.setState({id:e,restaurants:t.data,req_votes:t.req_votes,total_votes:t.total_votes,voted_on:n.voted,disabled:!0});a.setState({id:e,restaurants:t.data,req_votes:t.req_votes,total_votes:t.total_votes})}else a.setState({redirect:!0})}).catch(function(e){console.log(e)})},a.copyToClipboard=function(e){a.textArea.select(),document.execCommand("copy"),e.target.focus(),a.setState({copySuccess:"Copied!"})},a.handleVote=function(){var e=a.state,t=e.id,n=e.voted_on,l=e.restaurants,o=e.total_votes,s=e.req_votes,r=l.reduce(function(e,t,a){return n===t.name&&(e=a),e},"");console.log(a.state),o[r]=o[r]+1;var c=o;C.database().ref("/polls").child(t).set({data:l,req_votes:s,total_votes:c},function(e){e?console.log("FAILED TO WRITE TO FIREBASE"):(localStorage.setItem("ee_"+t,JSON.stringify({voted:n})),a.setState({total_votes:c,disabled:!0}))})},a.handleOnClick=function(e){return function(t){if(t){var n=a.state.voted_on;if("vote"!==e)t.target.value!==n?a.setState(Object(p.a)({},e,t.target.value)):a.setState(Object(p.a)({},e,null));else{if(!n)return;a.handleVote()}}}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=(this.props.match.params||null).id;e?this.checkData(e):this.setState({redirect:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.id,n=t.redirect,o=t.restaurants,s=t.disabled,r=t.voted_on,c=t.total_votes,i=c?c.reduce(function(e,t,a){return e+t},0):0;return console.log(o),l.a.createElement(l.a.Fragment,null,n?l.a.createElement(d.a,{to:"/"}):o?l.a.createElement("div",{className:"container mx-0 col-12 "},l.a.createElement("div",{className:"row justify-content-md-center"},l.a.createElement("div",{className:"col-sm-12 col-md-6 row"},l.a.createElement("form",{className:"col col-sm-1",style:{height:"0px",width:"0px",backgroundColor:"grey"}},l.a.createElement("textarea",{style:{height:"0px",width:"0px",backgroundColor:"grey"},ref:function(t){return e.textArea=t},value:"http://localhost:3000/#/poll/"+a,readOnly:!0})),document.queryCommandSupported("copy")&&l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("button",{className:"btn btn-outline-info col-sm-12",onClick:this.copyToClipboard},"Copy Url"),this.state.copySuccess),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("span",{className:"h4"},"Total Votes: ",i," ")))),l.a.createElement("div",{className:"row justify-content-md-center"},o.map(function(t,a){return l.a.createElement("div",{className:"my-1 col-md-auto",key:a},r?l.a.createElement(g,Object.assign({},t,{poll:!0,handleOnClick:e.handleOnClick,isChecked:r===t.name,isDisabled:s})):l.a.createElement(g,Object.assign({},t,{poll:!0,handleOnClick:e.handleOnClick,isDisabled:s})))}),r?l.a.createElement("div",{className:"container row my-1"},l.a.createElement("div",{className:"col-sm-12 my-1"},l.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:this.handleOnClick("vote"),style:{width:"100%"}},"Vote"))):l.a.createElement(l.a.Fragment,null))):l.a.createElement("div",{className:"d-flex justify-content-center mt-5 pt-5"},l.a.createElement("div",{className:"spinner-border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading..."))))}}]),t}(n.Component),D=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.d,null,l.a.createElement(d.b,{path:"/",exact:!0,component:M}),l.a.createElement(d.b,{path:"/infopage",exact:!0,component:L}),l.a.createElement(d.b,{path:"/genpoll",component:w}),l.a.createElement(d.b,{path:"/poll/:id",component:A})))}}]),t}(n.Component),F=a(33);a(213),a(216),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(F.a,null,l.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},26:function(e,t,a){e.exports=a.p+"static/media/logo.adb37c85.jpg"},68:function(e,t,a){},94:function(e,t,a){e.exports=a(217)}},[[94,1,2]]]);
//# sourceMappingURL=main.b1a15c5b.chunk.js.map